/* Fractal Dark Theme - modern readable palette with subtle animated fractal background.
   This CSS preserves existing structural classes (.container, .footer, etc.) so HTML pages
   continue to work without modification. The decorative fractal background is injected
   by matrix.js when --site-theme is "fractal". Colors chosen for high contrast and legibility.
*/
:root{
  --site-theme: fractal; /* detected by matrix.js */
  --bg: #061018;           /* deeper, darker base to make fractal and panels read well */
  --panel: rgba(8,12,14,0.56); /* slightly more translucent panels so fractal shows through */
  --panel-border: rgba(255,255,255,0.04);
  --accent: #4fe0c1;      /* primary accent (teal) */
  --accent-2: #7bdcff;    /* secondary accent (soft cyan) */
  --text: #e8f0f5;        /* near-white readable text */
  --muted: #96a4ae;       /* muted text */
  --shadow: 0 10px 30px rgba(3,10,14,0.55);
  --radius: 12px;
  --max-width: 960px;
  --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, "Courier New", monospace;
  /* Speaker-specific colors for chat on eve.html */
  --liyu-color: #4fe0c1;  /* teal */
  --eve-color: #00ff41;   /* neon green */
}

html,body{ height:100%; }
body{
  margin:0;
  background: var(--bg);
  color: var(--text);
  font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  line-height:1.6;
  -webkit-text-size-adjust:100%;
  text-rendering:optimizeLegibility;
  overflow-x: hidden;
  position: relative;
  min-height: 100vh;
}

/* Decorative fractal container (injected by matrix.js) */
#fractal-bg{ position: fixed; inset: 0; z-index: 0; pointer-events: none; opacity: 1; mix-blend-mode: overlay; filter: contrast(1.12) saturate(1.06); }
#fractal-bg svg{ width: 100vw; height: 100vh; display:block; }

/* Keep content above decorative background */
.container{
  max-width: var(--max-width);
  margin: 40px auto;
  padding: 34px 28px;
  background: var(--panel);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  border: 1px solid var(--panel-border);
  position: relative; /* above decorative elements */
  z-index: 2;
  box-sizing: border-box;
  /* slight backdrop blur to separate text while keeping fractal visible */
  -webkit-backdrop-filter: blur(4px) saturate(1.02);
  backdrop-filter: blur(4px) saturate(1.02);
}

/* Headings */
h1, h2, h3{
  color: var(--accent);
  margin: 0 0 12px 0;
  font-weight: 700;
}
h1{ font-size: 1.95rem; }
h2{ font-size: 1.25rem; }

p, li, span, a{ color: var(--text); }

/* Links */
a{ color: var(--accent-2); text-decoration: none; border-bottom: 1px dotted rgba(123,220,255,0.18); }
a:hover{ color: var(--accent); border-bottom-style: solid; }

/* Lists and blocks */
ul{ padding-left: 18px; }
li{ margin: 8px 0; }
.block, .aside-box{
  /* make informational boxes more translucent so fractal shows through */
  background: rgba(79,224,193,0.035);
  border-left:4px solid var(--accent);
  padding: 12px 16px;
  border-radius:10px;
}

/* Footer */
.footer{ color: var(--muted); font-size: 0.95rem; margin-top: 26px; }

/* Code and pre */
code, pre{ background: rgba(230,238,246,0.03); color: var(--text); border-radius:8px; padding: 6px 8px; font-family: var(--mono); }
pre{ padding: 12px; overflow:auto; border: 1px solid rgba(255,255,255,0.03); }

/* Images */
.image-section img{ border-radius:8px; max-width:100%; height:auto; display:block; }

/* Responsive tweaks */
@media (max-width: 960px){
  .container{ margin: 20px 12px; padding: 22px; }
}

/* Subtle focus improvement for accessibility */
:focus{ outline: 3px solid rgba(79,224,193,0.14); outline-offset: 2px; }

/* Mono names and bilingual marker */
.name-bilingual .amh{ font-family: "Noto Sans Ethiopic", system-ui, sans-serif; color: var(--accent); font-weight: 700; }

/* Small utilities */
header, main, footer, .container{ position: relative; z-index: 2; }

/* Adjustments for elements that used solid boxes in page-specific CSS
   Many pages declare solid backgrounds for list items / aside boxes; override them here
   with slightly translucent variants so the fractal remains visible beneath. */
li, .aside-box, .goal-box, .note, .container .block {
  background: rgba(14,18,20,0.48) !important;
}

/* Tweak legacy page-specific colors to ensure contrast */
h1, h2, h3 { text-shadow: 0 1px 0 rgba(0,0,0,0.35); }

/* Ensure small callouts keep good contrast */
.aside-box strong, .block strong { color: var(--accent-2); }

/* If a page accidentally set a very dark panel color, keep the site readable by guaranteeing text contrast */
.container * { color: var(--text) !important; }

/* Chat / example conversation styles used on eve.html */
.chat{
  margin: 18px 0 24px 0;
  display:flex;
  flex-direction:column;
  gap:10px;
  font-family: var(--mono);
  font-size: 0.98rem;
}
.chat .msg{
  padding: 10px 14px;
  border-radius: 12px;
  max-width: 86%;
  line-height: 1.45;
  word-break: break-word;
  box-shadow: 0 4px 18px rgba(7,10,12,0.28);
}
.chat .liyu{
  align-self: flex-start;
  background: rgba(79,224,193,0.06);
  border: 1px solid rgba(79,224,193,0.12);
  color: var(--liyu-color);
}
.chat .eve{
  align-self: flex-end;
  background: rgba(0,255,65,0.04);
  border: 1px solid rgba(0,255,65,0.12);
  color: var(--eve-color);
}
.chat .speaker{
  display:block;
  font-weight:700;
  margin-bottom:6px;
  font-size:0.95em;
}

@media (max-width: 640px){
  .chat .msg{ max-width: 100%; }
}
